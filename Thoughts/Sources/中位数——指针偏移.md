# 中位数——指针偏移  
 
在一个（值各不同）数列中维护值中位数  
可以使用一个稳定的自排序数据结构（这里使用set  
很显然一次插入和删除所造成的**影响最多偏移一位**  
那么我们可以从开始就设立一个指针指向中位数（从娃娃抓起  
然后根据插入或删除的值和当前中位数比较来确定我们要往哪偏移或者偏不偏移  
这样就可以O(n)地跑完整个测试  
 
## 程序
>问：有一个空数列，n次操作，每次插入一个数(1)或者删除一个数(0)，在每次操作之后都要给出中位数  
```cpp
int n;
set<int> st;
int more = 0; // 表示右边比左边多的个数
set<int>::iterator it;

inline void add ( int x ) {
        st.insert(x);
        if ( st.size() == 1 ) { it = st.begin(); return; } // 初始化it
        if ( x > *it ) {
                more ++;
                if ( more == 2 ) it ++, more = 0;
        } else {
                more --;
                if ( more == -1 ) it --, more = 1;
        }
}
inline void del ( int x ) {
        if ( x == *it ) { // 删除的是自己的话要看一下往哪移动
                if ( st.size() & 1 ) it --, more = 1;
                else                 it ++, more = 0;
                st.erase(x);
                return;
         }
        st.erase(x);
        if ( x > *it ) {
                more --;
                if ( more == -1 ) it --, more = 1;
        } else {
                more ++;
                if ( more == 2 ) it ++, more = 0;
        }
}

int main () {
        cin >> n;
        for ( int i = 1; i <= n; i ++ ) {
                int op, x; cin >> op >> x;
                if ( op ) add(x);
                else      del(x);
                cout << *it << endl;
        }
}
```
