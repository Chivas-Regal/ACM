# 🔗
http://acm.hdu.edu.cn/showproblem.php?pid=2087

# 💡
KMP模板  
但是不能重复  
所以一旦判成一次j要变-1  

# <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >  
  
```cpp
#pragma region
#pragma GCC optimize(3,"Ofast","inline")
#include <unordered_map>
#include <algorithm>
#include <iostream>
#include <cstring>
#include <string>
#include <vector>
#include <cstdio>
#include <stack>
#include <queue>
#include <cmath>
#include <map>
#include <set>
#define G 10.0
#define LNF 1e18
#define eps 1e-6
#define PI acos(-1.0)
#define ll long long
#define INF 0x7FFFFFFF
#define Regal exit(0)
#define Chivas int main()
#define pb(x) push_back(x)
#define SP system("pause")
#define Max(a,b) ((a)>(b)?(a):(b))
#define Min(a,b) ((a)<(b)?(a):(b))
#define IOS ios::sync_with_stdio(false)
#define mm(a, b) memset(a, b, sizeof(a))
#define each_cass(cass) for (cin>>cass; cass; cass--)
#define test(a) cout << "---------" << a << "---------" << '\n'
 
using namespace std;
#pragma endregion

//全局变量
#pragma region
struct node_KMP{
    string a, b;
    int nxt[1010];
    inline void GetNext(){//模式串自己和自己匹配的过程
        int len = b.size();
        for(int i = 0; i < len; i ++) nxt[i] = -1;//初始化nxt
        int j = -1;//i和j要错一位，不然都相等了
        for(int i = 0; i < len - 1; i ++){
            while(j >= 0 && b[j + 1] != b[i + 1]) j = nxt[j];//j要向前拉
            if(b[i + 1] == b[j + 1]) j ++;//都匹配j可以++
            nxt[i + 1] = j;//记录每个点的nxt值，因为判就按下一位判的，所以每次存的都是下一位的nxt
        }
    }
    inline int KMP(){//a和b匹配的过程
        int lenb = b.size();
        int lena = a.size();
        int j = -1;
        int cnt = 0;
        for(int i = -1; i < lena - 1; i ++){
            while(j >= 0 && b[j + 1] != a[i + 1]) j = nxt[j];//向前拉
            if(b[j + 1] == a[i + 1]) j ++;
            if(j == lenb - 1){//因为判都是按下一位判的，所以j的下一位到头了就是成功了
                cnt ++;
                j = -1;//前面的裁掉了，要重新开始了
            }
        }
        return cnt;
    }
};
#pragma endregion

//主体------------------------------------------

Chivas{
    string a, b;
    node_KMP nd;
    IOS;
    while(cin >> a, a != "#"){
        cin >> b;

        nd.a = a, nd.b = b;
        nd.GetNext();
        cout << nd.KMP() << endl;

    }
    Regal;
}
```
