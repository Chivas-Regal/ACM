# ğŸ”—
<a href="https://www.acwing.com/problem/content/2821/"><img src="https://i.loli.net/2021/10/05/SFb4XtJDf6WPsmT.png"></a>

# ğŸ’¡
ä¸‹æ ‡ä¸€ç»´ï¼Œæƒå€¼ä¸€ç»´  
å¯ä»¥åˆ©ç”¨åˆ é™¤çš„é¡ºåºæ„å»ºå‡ºä¸€ä¸ªæ—¶é—´è½´ï¼Œé‚£ä¹ˆæ—¶é—´æˆ³å°±æ˜¯ç¬¬ä¸‰ç»´  
æˆ‘ä»¬å¯ä»¥å…ˆæ±‚å‡ºå¯¹äºT[j]ä»£è¡¨çš„æ•°æ„æˆçš„é€†åºå¯¹æ•°é‡  
åœ¨è·å–ç­”æ¡ˆçš„æ—¶å€™æ—¶é—´æˆ³ä»å°åˆ°å¤§è¿›è¡Œç´¯åŠ å¾—åˆ°æ¯ä¸€ä¸ªåˆ å‰çš„ç­”æ¡ˆ  
  
ä¸‹æ ‡æœ¬å°±æ’å¥½äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¹è¿™ä¸ªç»´è¿›è¡Œæ’åº  
æ—¶é—´æˆ³æˆ‘ä»¬å¯ä»¥åç€å»ºï¼Œä¸åˆ çš„æ•°æœ€å°ï¼Œè¿™æ ·çš„è¯æ‰€æœ‰æ²¡æœ‰è¢«åˆ æ‰çš„æ•°çš„æ—¶é—´æˆ³éƒ½æ¯”å½“å‰æ•°è¦å°ï¼Œå°±å¯ä»¥ç›´æ¥æ±‚æ ‘çŠ¶æ•°ç»„å‰ç¼€  
  
å¯¹äºé€†åºå¯¹ï¼Œåœ¨åŒºé—´è¢«åˆ†æˆä¸¤åŠæ—¶  
1.iåœ¨å‰ï¼Œjåœ¨åï¼Œa[i]>=a[j]ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¯æ¬¡æ‰¾çš„æ˜¯æ¯”a[j]å¤§çš„ï¼Œå¯ä»¥ä¸¤ä¸ªæŒ‡é’ˆä»åå¾€å‰éå†  
2.iåœ¨åï¼Œjåœ¨å‰ï¼Œa[i]<=a[j]ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¯æ¬¡æ‰¾çš„æ˜¯æ¯”a[j]å°çš„ï¼Œå¯ä»¥ä¸¤ä¸ªæŒ‡é’ˆä»å‰å¾€åéå†  
ç„¶åå†åˆå¹¶ä¸€ä¸‹åŒºé—´å³å¯  

# <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
#include <iostream>

using namespace std;

#define ll long long

const int N = 1e5 + 10;
int n, m;
struct Data {
        int a, t, res; // æƒå€¼ã€ä¿®æ”¹æ—¶é—´æˆ³
}q[N], w[N];
ll res[N]; // æ—¶é—´æˆ³å¯¹åº”çš„é€†åºå¯¹æ•°
int pos[N]; // è¿™ä¸ªæ•°å‡ºç°çš„ä½ç½®

namespace TreeArray {
        int tr[N];
        inline int lowbit ( int x ) { return x & -x; }
        inline void update ( int x, int val ) { while ( x < N ) tr[x] += val, x += lowbit(x); }
        inline int query ( int x ) { int res = 0; while ( x > 0 ) res += tr[x], x -= lowbit(x); return res; }
} using namespace TreeArray;

inline void merge_Sort ( int l, int r ) {
        if ( l >= r ) return;
        int mid = ( l + r ) >> 1;
        merge_Sort ( l, mid ); merge_Sort ( mid + 1, r );
        
        int i, j, k;
        i = mid, j = r; // iå‰jåï¼Œa[i]>=a[j] 
        while ( i >= l && j >= mid + 1 )
                if ( q[i].a >= q[j].a ) update (q[i].t, 1), i --;
                else                    q[j].res += query ( q[j].t ), j --;
        while ( i >= l )       update ( q[i].t, 1 ), i --;
        while ( j >= mid + 1 ) q[j].res += query ( q[j].t ), j --;
        for ( int k = l; k <= mid; k ++ ) update ( q[k].t, -1 ); 

        i = mid + 1, j = l; // iåjå‰ï¼Œa[i]<=a[j]
        while ( i <= r && j <= mid )
                if ( q[i].a <= q[j].a ) update ( q[i].t, 1 ), i ++;
                else                    q[j].res += query ( q[j].t ), j ++;
        while ( i <= r )   update ( q[i].t, 1 ), i ++;
        while ( j <= mid ) q[j].res += query ( q[j].t ), j ++;
        for ( int k = mid + 1; k <= r; k ++ ) update ( q[k].t, -1 );

        i = l, j = mid + 1, k = 0;
        while ( i <= mid && j <= r )
                if ( q[i].a <= q[j].a ) w[k ++] = q[i ++];
                else                    w[k ++] = q[j ++];
        while ( i <= mid ) w[k ++] = q[i ++];
        while ( j <= r )   w[k ++] = q[j ++];

        for ( i = 0, j = l; i < k; i ++, j ++ )  q[j] = w[i];
}

int main () {
        ios::sync_with_stdio(false);
#ifndef ONLINE_JUDGE
        freopen("in.in", "r", stdin);
        freopen("out.out", "w", stdout);
#endif
        cin >> n >> m;
        for ( int i = 0; i < n; i ++ )
                cin >> q[i].a,
                pos[q[i].a] = i;

        int k = n;
        for ( int i = 0, x; i < m; i ++ ) 
                cin >> x,
                q[pos[x]].t = k --,
                pos[x] = -1;
        for ( int i = 0; i < n; i ++ )
                if ( pos[q[i].a] != -1 ) q[i].t = k --;
        
        merge_Sort ( 0, n - 1 );
        for ( int i = 0; i < n; i ++ ) res[q[i].t] = q[i].res;
        for ( int i = 2; i <= n; i ++ ) res[i] += res[i - 1]; // æ—¶é—´æˆ³çš„å€¼è¿›è¡Œç´¯åŠ 
        for ( int i = 0, j = n; i < m; i ++, j -- ) cout << res[j] << endl;
}

```
