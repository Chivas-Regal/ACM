# ğŸ”—
<a href=""><img src="https://i.loli.net/2021/09/22/46SQYXihVCWzBJm.png"></a>

# ğŸ’¡
é¦–å…ˆåœ¨ç›¸åŒç§ç±»çš„æ“ä½œé‡å æ—¶  
é™¤äº†æœ€å¤§é•¿åº¦çš„ï¼Œåˆ«çš„éƒ½æ²¡æœ‰ä½œç”¨  
æ‰€ä»¥å¯ä»¥æŠŠæ“ä½œç§ç±»å˜ä¸ºä¸€ä¸ªä¸ª01æ¥å›è·³çš„æ“ä½œ  
  
ç„¶åè¿˜å¯ä»¥è¿›è¡Œä¸‹é¢çš„ä¼˜åŒ–
<img src="https://i.loli.net/2021/09/22/weHq8EA5rtK7pbj.jpg"> 
å¯ä»¥é€šè¿‡æ ˆæ¥ç»´æŠ¤æœ‰æ•ˆæ“ä½œ  
å¯ä»¥å‘ç°[l, r]ä¸æ–­ç¼©è¿›ï¼Œé‚£ä¹ˆæœ‰æ•ˆæ“ä½œç¡®å®šä¹‹åå¯ä»¥è¿›è¡Œèµ‹å€¼äº†  

# <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```cpp
#include <iostream>
#include <algorithm>
#include <vector>
#include <map>
#include <stack>

using namespace std;

const int N = 1e5 + 10;
#define x first
#define y second
#define pii pair<int, int>

int n, m;
vector<pair<int, int> > stk; // first = op, second = x
int res[N];

int main () {
#ifndef ONLINE_JUDGE
	freopen("in.in", "r", stdin);
	freopen("out.out", "w", stdout);
#endif
	stk.push_back({0, 100});
	cin >> n >> m;
	while ( m -- ) {
		int p, q; cin >> p >> q;
		if ( p == 0 ) { // å‰ç¼€
			while ( stk.size() && stk.back().x == 0 ) // åŒç§æ“ä½œ
				q = max ( q, stk.back().y ),
				stk.pop_back();
			while ( stk.size() >= 2 && stk[stk.size() - 2].y <= q ) // è‹¥è¿™æ¬¡æ“ä½œåŒºé—´è¦†ç›–äº†ä¸Šæ¬¡åŒç±»æ“ä½œçš„åŒºé—´ï¼Œå¯ä»¥å®Œæ•´åˆ æ‰å‰ä¸¤æ¬¡æ“ä½œ
				stk.pop_back(),
				stk.pop_back();
		} else if ( stk.size() ) { // åç¼€
			while ( stk.size() && stk.back().x == 1 ) 
				q = min ( q, stk.back().y ),
				stk.pop_back();
			while ( stk.size() >= 2 && stk[stk.size() - 2].y >= q ) 
				stk.pop_back(),
				stk.pop_back();
		}
		stk.push_back({p, q});
	}
	int k = n, l = 1, r = n;
	for ( int i = 0; i < stk.size(); i ++ ) { // ä¸€ä¸ªä¸ªç¼©è¿›åŒºé—´å¹¶èµ‹å€¼
		if ( stk[i].x == 0 ) {
			while ( r > stk[i].y && l <= r ) res[ r -- ] = k --;
		} else {
			while ( l < stk[i].y && l <= r ) res[ l ++ ] = k --;
		}
		if ( l > r ) break;
	}
	if ( stk.size() % 2 ) // æ¼äº†ä¸€ä¸ª
		while ( l <= r ) res[ l ++ ] = k --;
	else 
		while ( l <= r ) res[ r -- ] = k --;
	for ( int i = 1; i <= n; i ++ ) cout << res[i] << " ";
}
```
