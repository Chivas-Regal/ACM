# 🔗
<a href="https://www.luogu.com.cn/problem/P1066"><img src="https://i.loli.net/2021/11/09/L12VyJBogcEPT86.png"></a>

# 💡
我们先打一个  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制和  <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> 进制的对应表看看  
<table>
<tr><th>k</th><th> <img src="https://latex.codecogs.com/svg.image?\inline&space;10" title="\inline 10" />  进制</th><th> <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制</th><th> <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> 进制</th></tr>
<tr><td rowspan="101">1</td></tr><tr><td>1</td><td>1</td><td>1</td></tr>
<tr><td>2</td><td>10</td><td>10</td></tr>
<tr><td>3</td><td>11</td><td>11</td></tr>
<tr><td>4</td><td>100</td><td>100</td></tr>
<tr><td>5</td><td>101</td><td>101</td></tr>
<tr><td>6</td><td>110</td><td>110</td></tr>
<tr><td>7</td><td>111</td><td>111</td></tr>
<tr><td>8</td><td>1000</td><td>1000</td></tr>
<tr><td>9</td><td>1001</td><td>1001</td></tr>
<tr><td>10</td><td>1010</td><td>1010</td></tr>
<tr><td>11</td><td>1011</td><td>1011</td></tr>
<tr><td>12</td><td>1100</td><td>1100</td></tr>
<tr><td>13</td><td>1101</td><td>1101</td></tr>
<tr><td>14</td><td>1110</td><td>1110</td></tr>
<tr><td>15</td><td>1111</td><td>1111</td></tr>
<tr><td>16</td><td>10000</td><td>10000</td></tr>
<tr><td>17</td><td>10001</td><td>10001</td></tr>
<tr><td>18</td><td>10010</td><td>10010</td></tr>
<tr><td>19</td><td>10011</td><td>10011</td></tr>
<tr><td>20</td><td>10100</td><td>10100</td></tr>
<tr><td>21</td><td>10101</td><td>10101</td></tr>
<tr><td>22</td><td>10110</td><td>10110</td></tr>
<tr><td>23</td><td>10111</td><td>10111</td></tr>
<tr><td>24</td><td>11000</td><td>11000</td></tr>
<tr><td>25</td><td>11001</td><td>11001</td></tr>
<tr><td>26</td><td>11010</td><td>11010</td></tr>
<tr><td>27</td><td>11011</td><td>11011</td></tr>
<tr><td>28</td><td>11100</td><td>11100</td></tr>
<tr><td>29</td><td>11101</td><td>11101</td></tr>
<tr><td>30</td><td>11110</td><td>11110</td></tr>
<tr><td>31</td><td>11111</td><td>11111</td></tr>
<tr><td>32</td><td>100000</td><td>100000</td></tr>
<tr><td>33</td><td>100001</td><td>100001</td></tr>
<tr><td>34</td><td>100010</td><td>100010</td></tr>
<tr><td>35</td><td>100011</td><td>100011</td></tr>
<tr><td>36</td><td>100100</td><td>100100</td></tr>
<tr><td>37</td><td>100101</td><td>100101</td></tr>
<tr><td>38</td><td>100110</td><td>100110</td></tr>
<tr><td>39</td><td>100111</td><td>100111</td></tr>
<tr><td>40</td><td>101000</td><td>101000</td></tr>
<tr><td>41</td><td>101001</td><td>101001</td></tr>
<tr><td>42</td><td>101010</td><td>101010</td></tr>
<tr><td>43</td><td>101011</td><td>101011</td></tr>
<tr><td>44</td><td>101100</td><td>101100</td></tr>
<tr><td>45</td><td>101101</td><td>101101</td></tr>
<tr><td>46</td><td>101110</td><td>101110</td></tr>
<tr><td>47</td><td>101111</td><td>101111</td></tr>
<tr><td>48</td><td>110000</td><td>110000</td></tr>
<tr><td>49</td><td>110001</td><td>110001</td></tr>
<tr><td>50</td><td>110010</td><td>110010</td></tr>
<tr><td>51</td><td>110011</td><td>110011</td></tr>
<tr><td>52</td><td>110100</td><td>110100</td></tr>
<tr><td>53</td><td>110101</td><td>110101</td></tr>
<tr><td>54</td><td>110110</td><td>110110</td></tr>
<tr><td>55</td><td>110111</td><td>110111</td></tr>
<tr><td>56</td><td>111000</td><td>111000</td></tr>
<tr><td>57</td><td>111001</td><td>111001</td></tr>
<tr><td>58</td><td>111010</td><td>111010</td></tr>
<tr><td>59</td><td>111011</td><td>111011</td></tr>
<tr><td>60</td><td>111100</td><td>111100</td></tr>
<tr><td>61</td><td>111101</td><td>111101</td></tr>
<tr><td>62</td><td>111110</td><td>111110</td></tr>
<tr><td>63</td><td>111111</td><td>111111</td></tr>
<tr><td>64</td><td>1000000</td><td>1000000</td></tr>
<tr><td>65</td><td>1000001</td><td>1000001</td></tr>
<tr><td>66</td><td>1000010</td><td>1000010</td></tr>
<tr><td>67</td><td>1000011</td><td>1000011</td></tr>
<tr><td>68</td><td>1000100</td><td>1000100</td></tr>
<tr><td>69</td><td>1000101</td><td>1000101</td></tr>
<tr><td>70</td><td>1000110</td><td>1000110</td></tr>
<tr><td>71</td><td>1000111</td><td>1000111</td></tr>
<tr><td>72</td><td>1001000</td><td>1001000</td></tr>
<tr><td>73</td><td>1001001</td><td>1001001</td></tr>
<tr><td>74</td><td>1001010</td><td>1001010</td></tr>
<tr><td>75</td><td>1001011</td><td>1001011</td></tr>
<tr><td>76</td><td>1001100</td><td>1001100</td></tr>
<tr><td>77</td><td>1001101</td><td>1001101</td></tr>
<tr><td>78</td><td>1001110</td><td>1001110</td></tr>
<tr><td>79</td><td>1001111</td><td>1001111</td></tr>
<tr><td>80</td><td>1010000</td><td>1010000</td></tr>
<tr><td>81</td><td>1010001</td><td>1010001</td></tr>
<tr><td>82</td><td>1010010</td><td>1010010</td></tr>
<tr><td>83</td><td>1010011</td><td>1010011</td></tr>
<tr><td>84</td><td>1010100</td><td>1010100</td></tr>
<tr><td>85</td><td>1010101</td><td>1010101</td></tr>
<tr><td>86</td><td>1010110</td><td>1010110</td></tr>
<tr><td>87</td><td>1010111</td><td>1010111</td></tr>
<tr><td>88</td><td>1011000</td><td>1011000</td></tr>
<tr><td>89</td><td>1011001</td><td>1011001</td></tr>
<tr><td>90</td><td>1011010</td><td>1011010</td></tr>
<tr><td>91</td><td>1011011</td><td>1011011</td></tr>
<tr><td>92</td><td>1011100</td><td>1011100</td></tr>
<tr><td>93</td><td>1011101</td><td>1011101</td></tr>
<tr><td>94</td><td>1011110</td><td>1011110</td></tr>
<tr><td>95</td><td>1011111</td><td>1011111</td></tr>
<tr><td>96</td><td>1100000</td><td>1100000</td></tr>
<tr><td>97</td><td>1100001</td><td>1100001</td></tr>
<tr><td>98</td><td>1100010</td><td>1100010</td></tr>
<tr><td>99</td><td>1100011</td><td>1100011</td></tr>
<tr><td>100</td><td>1100100</td><td>1100100</td></tr>
<tr><td rowspan="101">2</td></tr><tr><td>1</td><td>1</td><td>1</td></tr>
<tr><td>2</td><td>2</td><td>10</td></tr>
<tr><td>3</td><td>3</td><td>11</td></tr>
<tr><td>4</td><td>10</td><td>100</td></tr>
<tr><td>5</td><td>11</td><td>101</td></tr>
<tr><td>6</td><td>12</td><td>110</td></tr>
<tr><td>7</td><td>13</td><td>111</td></tr>
<tr><td>8</td><td>20</td><td>1000</td></tr>
<tr><td>9</td><td>21</td><td>1001</td></tr>
<tr><td>10</td><td>22</td><td>1010</td></tr>
<tr><td>11</td><td>23</td><td>1011</td></tr>
<tr><td>12</td><td>30</td><td>1100</td></tr>
<tr><td>13</td><td>31</td><td>1101</td></tr>
<tr><td>14</td><td>32</td><td>1110</td></tr>
<tr><td>15</td><td>33</td><td>1111</td></tr>
<tr><td>16</td><td>100</td><td>10000</td></tr>
<tr><td>17</td><td>101</td><td>10001</td></tr>
<tr><td>18</td><td>102</td><td>10010</td></tr>
<tr><td>19</td><td>103</td><td>10011</td></tr>
<tr><td>20</td><td>110</td><td>10100</td></tr>
<tr><td>21</td><td>111</td><td>10101</td></tr>
<tr><td>22</td><td>112</td><td>10110</td></tr>
<tr><td>23</td><td>113</td><td>10111</td></tr>
<tr><td>24</td><td>120</td><td>11000</td></tr>
<tr><td>25</td><td>121</td><td>11001</td></tr>
<tr><td>26</td><td>122</td><td>11010</td></tr>
<tr><td>27</td><td>123</td><td>11011</td></tr>
<tr><td>28</td><td>130</td><td>11100</td></tr>
<tr><td>29</td><td>131</td><td>11101</td></tr>
<tr><td>30</td><td>132</td><td>11110</td></tr>
<tr><td>31</td><td>133</td><td>11111</td></tr>
<tr><td>32</td><td>200</td><td>100000</td></tr>
<tr><td>33</td><td>201</td><td>100001</td></tr>
<tr><td>34</td><td>202</td><td>100010</td></tr>
<tr><td>35</td><td>203</td><td>100011</td></tr>
<tr><td>36</td><td>210</td><td>100100</td></tr>
<tr><td>37</td><td>211</td><td>100101</td></tr>
<tr><td>38</td><td>212</td><td>100110</td></tr>
<tr><td>39</td><td>213</td><td>100111</td></tr>
<tr><td>40</td><td>220</td><td>101000</td></tr>
<tr><td>41</td><td>221</td><td>101001</td></tr>
<tr><td>42</td><td>222</td><td>101010</td></tr>
<tr><td>43</td><td>223</td><td>101011</td></tr>
<tr><td>44</td><td>230</td><td>101100</td></tr>
<tr><td>45</td><td>231</td><td>101101</td></tr>
<tr><td>46</td><td>232</td><td>101110</td></tr>
<tr><td>47</td><td>233</td><td>101111</td></tr>
<tr><td>48</td><td>300</td><td>110000</td></tr>
<tr><td>49</td><td>301</td><td>110001</td></tr>
<tr><td>50</td><td>302</td><td>110010</td></tr>
<tr><td>51</td><td>303</td><td>110011</td></tr>
<tr><td>52</td><td>310</td><td>110100</td></tr>
<tr><td>53</td><td>311</td><td>110101</td></tr>
<tr><td>54</td><td>312</td><td>110110</td></tr>
<tr><td>55</td><td>313</td><td>110111</td></tr>
<tr><td>56</td><td>320</td><td>111000</td></tr>
<tr><td>57</td><td>321</td><td>111001</td></tr>
<tr><td>58</td><td>322</td><td>111010</td></tr>
<tr><td>59</td><td>323</td><td>111011</td></tr>
<tr><td>60</td><td>330</td><td>111100</td></tr>
<tr><td>61</td><td>331</td><td>111101</td></tr>
<tr><td>62</td><td>332</td><td>111110</td></tr>
<tr><td>63</td><td>333</td><td>111111</td></tr>
<tr><td>64</td><td>1000</td><td>1000000</td></tr>
<tr><td>65</td><td>1001</td><td>1000001</td></tr>
<tr><td>66</td><td>1002</td><td>1000010</td></tr>
<tr><td>67</td><td>1003</td><td>1000011</td></tr>
<tr><td>68</td><td>1010</td><td>1000100</td></tr>
<tr><td>69</td><td>1011</td><td>1000101</td></tr>
<tr><td>70</td><td>1012</td><td>1000110</td></tr>
<tr><td>71</td><td>1013</td><td>1000111</td></tr>
<tr><td>72</td><td>1020</td><td>1001000</td></tr>
<tr><td>73</td><td>1021</td><td>1001001</td></tr>
<tr><td>74</td><td>1022</td><td>1001010</td></tr>
<tr><td>75</td><td>1023</td><td>1001011</td></tr>
<tr><td>76</td><td>1030</td><td>1001100</td></tr>
<tr><td>77</td><td>1031</td><td>1001101</td></tr>
<tr><td>78</td><td>1032</td><td>1001110</td></tr>
<tr><td>79</td><td>1033</td><td>1001111</td></tr>
<tr><td>80</td><td>1100</td><td>1010000</td></tr>
<tr><td>81</td><td>1101</td><td>1010001</td></tr>
<tr><td>82</td><td>1102</td><td>1010010</td></tr>
<tr><td>83</td><td>1103</td><td>1010011</td></tr>
<tr><td>84</td><td>1110</td><td>1010100</td></tr>
<tr><td>85</td><td>1111</td><td>1010101</td></tr>
<tr><td>86</td><td>1112</td><td>1010110</td></tr>
<tr><td>87</td><td>1113</td><td>1010111</td></tr>
<tr><td>88</td><td>1120</td><td>1011000</td></tr>
<tr><td>89</td><td>1121</td><td>1011001</td></tr>
<tr><td>90</td><td>1122</td><td>1011010</td></tr>
<tr><td>91</td><td>1123</td><td>1011011</td></tr>
<tr><td>92</td><td>1130</td><td>1011100</td></tr>
<tr><td>93</td><td>1131</td><td>1011101</td></tr>
<tr><td>94</td><td>1132</td><td>1011110</td></tr>
<tr><td>95</td><td>1133</td><td>1011111</td></tr>
<tr><td>96</td><td>1200</td><td>1100000</td></tr>
<tr><td>97</td><td>1201</td><td>1100001</td></tr>
<tr><td>98</td><td>1202</td><td>1100010</td></tr>
<tr><td>99</td><td>1203</td><td>1100011</td></tr>
<tr><td>100</td><td>1210</td><td>1100100</td></tr>
<tr><td rowspan="101">3</td></tr><tr><td>1</td><td>1</td><td>1</td></tr>
<tr><td>2</td><td>2</td><td>10</td></tr>
<tr><td>3</td><td>3</td><td>11</td></tr>
<tr><td>4</td><td>4</td><td>100</td></tr>
<tr><td>5</td><td>5</td><td>101</td></tr>
<tr><td>6</td><td>6</td><td>110</td></tr>
<tr><td>7</td><td>7</td><td>111</td></tr>
<tr><td>8</td><td>10</td><td>1000</td></tr>
<tr><td>9</td><td>11</td><td>1001</td></tr>
<tr><td>10</td><td>12</td><td>1010</td></tr>
<tr><td>11</td><td>13</td><td>1011</td></tr>
<tr><td>12</td><td>14</td><td>1100</td></tr>
<tr><td>13</td><td>15</td><td>1101</td></tr>
<tr><td>14</td><td>16</td><td>1110</td></tr>
<tr><td>15</td><td>17</td><td>1111</td></tr>
<tr><td>16</td><td>20</td><td>10000</td></tr>
<tr><td>17</td><td>21</td><td>10001</td></tr>
<tr><td>18</td><td>22</td><td>10010</td></tr>
<tr><td>19</td><td>23</td><td>10011</td></tr>
<tr><td>20</td><td>24</td><td>10100</td></tr>
<tr><td>21</td><td>25</td><td>10101</td></tr>
<tr><td>22</td><td>26</td><td>10110</td></tr>
<tr><td>23</td><td>27</td><td>10111</td></tr>
<tr><td>24</td><td>30</td><td>11000</td></tr>
<tr><td>25</td><td>31</td><td>11001</td></tr>
<tr><td>26</td><td>32</td><td>11010</td></tr>
<tr><td>27</td><td>33</td><td>11011</td></tr>
<tr><td>28</td><td>34</td><td>11100</td></tr>
<tr><td>29</td><td>35</td><td>11101</td></tr>
<tr><td>30</td><td>36</td><td>11110</td></tr>
<tr><td>31</td><td>37</td><td>11111</td></tr>
<tr><td>32</td><td>40</td><td>100000</td></tr>
<tr><td>33</td><td>41</td><td>100001</td></tr>
<tr><td>34</td><td>42</td><td>100010</td></tr>
<tr><td>35</td><td>43</td><td>100011</td></tr>
<tr><td>36</td><td>44</td><td>100100</td></tr>
<tr><td>37</td><td>45</td><td>100101</td></tr>
<tr><td>38</td><td>46</td><td>100110</td></tr>
<tr><td>39</td><td>47</td><td>100111</td></tr>
<tr><td>40</td><td>50</td><td>101000</td></tr>
<tr><td>41</td><td>51</td><td>101001</td></tr>
<tr><td>42</td><td>52</td><td>101010</td></tr>
<tr><td>43</td><td>53</td><td>101011</td></tr>
<tr><td>44</td><td>54</td><td>101100</td></tr>
<tr><td>45</td><td>55</td><td>101101</td></tr>
<tr><td>46</td><td>56</td><td>101110</td></tr>
<tr><td>47</td><td>57</td><td>101111</td></tr>
<tr><td>48</td><td>60</td><td>110000</td></tr>
<tr><td>49</td><td>61</td><td>110001</td></tr>
<tr><td>50</td><td>62</td><td>110010</td></tr>
<tr><td>51</td><td>63</td><td>110011</td></tr>
<tr><td>52</td><td>64</td><td>110100</td></tr>
<tr><td>53</td><td>65</td><td>110101</td></tr>
<tr><td>54</td><td>66</td><td>110110</td></tr>
<tr><td>55</td><td>67</td><td>110111</td></tr>
<tr><td>56</td><td>70</td><td>111000</td></tr>
<tr><td>57</td><td>71</td><td>111001</td></tr>
<tr><td>58</td><td>72</td><td>111010</td></tr>
<tr><td>59</td><td>73</td><td>111011</td></tr>
<tr><td>60</td><td>74</td><td>111100</td></tr>
<tr><td>61</td><td>75</td><td>111101</td></tr>
<tr><td>62</td><td>76</td><td>111110</td></tr>
<tr><td>63</td><td>77</td><td>111111</td></tr>
<tr><td>64</td><td>100</td><td>1000000</td></tr>
<tr><td>65</td><td>101</td><td>1000001</td></tr>
<tr><td>66</td><td>102</td><td>1000010</td></tr>
<tr><td>67</td><td>103</td><td>1000011</td></tr>
<tr><td>68</td><td>104</td><td>1000100</td></tr>
<tr><td>69</td><td>105</td><td>1000101</td></tr>
<tr><td>70</td><td>106</td><td>1000110</td></tr>
<tr><td>71</td><td>107</td><td>1000111</td></tr>
<tr><td>72</td><td>110</td><td>1001000</td></tr>
<tr><td>73</td><td>111</td><td>1001001</td></tr>
<tr><td>74</td><td>112</td><td>1001010</td></tr>
<tr><td>75</td><td>113</td><td>1001011</td></tr>
<tr><td>76</td><td>114</td><td>1001100</td></tr>
<tr><td>77</td><td>115</td><td>1001101</td></tr>
<tr><td>78</td><td>116</td><td>1001110</td></tr>
<tr><td>79</td><td>117</td><td>1001111</td></tr>
<tr><td>80</td><td>120</td><td>1010000</td></tr>
<tr><td>81</td><td>121</td><td>1010001</td></tr>
<tr><td>82</td><td>122</td><td>1010010</td></tr>
<tr><td>83</td><td>123</td><td>1010011</td></tr>
<tr><td>84</td><td>124</td><td>1010100</td></tr>
<tr><td>85</td><td>125</td><td>1010101</td></tr>
<tr><td>86</td><td>126</td><td>1010110</td></tr>
<tr><td>87</td><td>127</td><td>1010111</td></tr>
<tr><td>88</td><td>130</td><td>1011000</td></tr>
<tr><td>89</td><td>131</td><td>1011001</td></tr>
<tr><td>90</td><td>132</td><td>1011010</td></tr>
<tr><td>91</td><td>133</td><td>1011011</td></tr>
<tr><td>92</td><td>134</td><td>1011100</td></tr>
<tr><td>93</td><td>135</td><td>1011101</td></tr>
<tr><td>94</td><td>136</td><td>1011110</td></tr>
<tr><td>95</td><td>137</td><td>1011111</td></tr>
<tr><td>96</td><td>140</td><td>1100000</td></tr>
<tr><td>97</td><td>141</td><td>1100001</td></tr>
<tr><td>98</td><td>142</td><td>1100010</td></tr>
<tr><td>99</td><td>143</td><td>1100011</td></tr>
<tr><td>100</td><td>144</td><td>1100100</td></tr>
</table>

  
可以发现几个有趣的事情：  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;1." title="\inline 1." />  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制对于  <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> 进制的进位极限在  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制表示的最高位上呈这样的排列  
 <table>
 <tr><th>k=1</th><td>1,1,1,1,1,1,...</td></tr>
 <tr><th>k=2</th><td>1,3,1,3,1,3,...</td></tr>
 <tr><th>k=3</th><td>1,3,7,1,3,7,...</td></tr>
 </table>  
 那么我们可以从中推出  
  <table>
 <tr><th>k=x</th><td> <img src="https://latex.codecogs.com/svg.image?\inline&space;2^0-1,2^1-1,2^2-1,...2^x-1,2^0-1,2^1-1,2^2-1,....,2^x-1...." title="\inline 2^0-1,2^1-1,2^2-1,...2^x-1,2^0-1,2^1-1,2^2-1,....,2^x-1...." /></td></tr>
 </table>  
 
  <img src="https://latex.codecogs.com/svg.image?\inline&space;2." title="\inline 2." /> <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制下，在这个排列里面，一次循环  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制会进一位  
  
    
    
对于题目，我们走完这个排列中  <img src="https://latex.codecogs.com/svg.image?\inline&space;w" title="\inline w" /> 个数就可以结束了    
我们枚举最高位的数字  <img src="https://latex.codecogs.com/svg.image?\inline&space;[1,2^k-1]" title="\inline [1,2^k-1]" />  ，可知在一次循环中我们  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制的位数时不变的  
且如果  <img src="https://latex.codecogs.com/svg.image?\inline&space;i+1" title="\inline i+1" /> 是  <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> 的幂次，即  <img src="https://latex.codecogs.com/svg.image?\inline&space;lowbit(i+1)=i+1" title="\inline lowbit(i+1)=i+1" />  那么就说明我们走过了排列中的一个数也就是在  <img src="https://latex.codecogs.com/svg.image?\inline&space;2" title="\inline 2" /> 进制下进了一位    
而我们想要在最高位  <img src="https://latex.codecogs.com/svg.image?\inline&space;i" title="\inline i" />  数字为  <img src="https://latex.codecogs.com/svg.image?\inline&space;j" title="\inline j" /> 时后面低位有多少种构造方式，可以通过  <img src="https://latex.codecogs.com/svg.image?\inline&space;dp[i][j]" title="\inline dp[i][j]" /> 预处理一下  
 <img src="https://latex.codecogs.com/svg.image?\inline&space;\begin{aligned}dp[i][j]&=\sum\limits_{x=1}^{(1<<k)-1}dp[i-1][x]\\&=dp[i][j-1]+dp[i-1][j]\end{aligned}" title="\inline \begin{aligned}dp[i][j]&=\sum\limits_{x=1}^{(1<<k)-1}dp[i-1][x]\\&=dp[i][j-1]+dp[i-1][j]\end{aligned}" />  

但是我们这个是计算了  <img src="https://latex.codecogs.com/svg.image?\inline&space;2^k" title="\inline 2^k" /> 进制下的所有可行位数，最后还要按要求减掉  <img src="https://latex.codecogs.com/svg.image?\inline&space;1" title="\inline 1" /> 位的  

这里上  <img src="https://latex.codecogs.com/svg.image?\inline&space;Java" title="\inline Java" /> 高精 

# <img src="https://img-blog.csdnimg.cn/20210713144601841.png" >
```
public class Main {

        static BigInteger zero = BigInteger.ZERO;
        static BigInteger one = BigInteger.ONE;
        static BigInteger two = BigInteger.valueOf(2);
        static BigInteger six = BigInteger.valueOf(6);
        static BigInteger ten = BigInteger.TEN;

        static int N = 1000;
        static BigInteger[][] dp = new BigInteger[N][N];
        static int k, w;

        public static void Get_Dp () {
                for ( int i = 0; i < N; i ++ ) for ( int j = 0; j < N; j ++ ) dp[i][j] = zero;
                for ( int i = 1; i < (1 << k); i ++ ) dp[1][i] = one;
                for ( int i = 2; i < (1 << k); i ++ ) {
                        for ( int j = 2; j < (1 << k); j ++ ) dp[i][1] = dp[i][1].add(dp[i - 1][j]);
                        for ( int j = 2; j < (1 << k); j ++ ) dp[i][j] = dp[i][j - 1].subtract(dp[i - 1][j]);
                }
        }
        public static int lowbit ( int x ) { return x & (-x); }
        public static void main (String[] args) {
                Scanner input = new Scanner(System.in);
                k = input.nextInt();
                w = input.nextInt(); int tmp = w;
                Get_Dp();

                int num = 1;
                BigInteger res = zero;
                boolean flag = false;
                while ( true ) {
                        for ( int i = 1; i < (1 << k); i ++ ) {         // 枚举最高位
                                res = res.add(dp[num][i]);              // num个数字，最高位是i的构造方式
                                if ( lowbit(i + 1) == i + 1 ) w --;     // 是排列中的一个数，进了一位
                                if ( w == 0 ) { flag = true; break; }   // 进到头了
                        }
                        if ( flag ) break;
                        num ++;
                }

                w = tmp;
                for ( int i = 1; i < (1 << k); i ++ ) { // 减去(2^k)长度为1的串
                        res = res.subtract(dp[1][i]);
                        if ( lowbit(i + 1) == i + 1 ) w --;
                        if ( w == 0 ) break;
                }
                System.out.println(res);
                input.close();
        }
}
```
